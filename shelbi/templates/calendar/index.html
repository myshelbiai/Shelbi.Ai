{% extends "base.html" %}
{% block title %}Calendar{% endblock %}
{% block content %}
  <h1 style="display:flex;align-items:center;gap:.5rem;">
  <a href="{{ prev_link }}">⟵</a>
  {{ month_name }} {{ year }}
  <a href="{{ next_link }}">⟶</a>
  <a href="{{ url_for('calendar.index', y=today.year, m=today.month) }}"
     style="margin-left:.75rem; font-size:.9rem; border:1px solid #ddd; padding:.2rem .5rem; text-decoration:none;">
    Today
  </a>
</h1>
<div style="margin:.5rem 0;">
  <form method="get" style="display:flex; gap:.5rem; align-items:center;">
    <label>Month
      <select name="m">
        {% for mnum in range(1,13) %}
          <option value="{{ mnum }}" {% if mnum == month %}selected{% endif %}>{{ mnum }} - {{ ['','Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'][mnum] }}</option>
        {% endfor %}
      </select>
    </label>
    <label>Year
      <input type="number" name="y" value="{{ year }}" style="width:6rem;">
    </label>
    <button type="submit">Go</button>
    <a href="{{ url_for('calendar.index', y=today.year, m=today.month) }}" style="margin-left:.5rem;">Today</a>
  </form>
</div>


  <table style="border-collapse:collapse;width:100%;max-width:700px;">
    <thead>
      <tr>
        {% for wday in ['Mon','Tue','Wed','Thu','Fri','Sat','Sun'] %}
          <th style="border:1px solid #ddd;padding:.5rem;text-align:center;background:#fafafa;">{{ wday }}</th>
        {% endfor %}
      </tr>
    </thead>
    <tbody>
      {% for row in weeks %}
        <tr>
          {% for d in row %}
            {% set is_today = (d == today.day and month == today.month and year == today.year) %}
            <td style="border:1px solid #eee;padding:.7rem;height:60px;vertical-align:top;{{ 'background:#eaf6ff;font-weight:600;' if is_today else '' }}">
              {% if d != 0 %}{{ d }}{% endif %}
            </td>
          {% endfor %}
        </tr>
      {% endfor %}
    </tbody>
  </table>
{% endblock %}
